import{a as W,b as j,c as F,e as A,f as O,g as z,h as B}from"./chunk-SQGIQ26W.js";import{j as N,p as P}from"./chunk-M4RPJYBD.js";import{$a as V,Ja as k,P as M,U as m,Ua as v,V as p,Va as S,W as E,Wa as w,Xa as h,Ya as D,Za as t,_a as n,db as C,ea as x,gb as u,hb as c,mb as I,nb as i,ob as g,pb as T,rb as b,sb as _,tb as f,wa as l}from"./chunk-67WPBUNM.js";var y=(r,a)=>a.id;function G(r,a){if(r&1){let e=C();t(0,"tr",11)(1,"td",8)(2,"div",14)(3,"div",15),i(4),n(),t(5,"span",16),i(6),n()()(),t(7,"td",17),i(8),n(),t(9,"td",8)(10,"span"),i(11),n()(),t(12,"td",8)(13,"button",18),u("click",function(){let o=m(e).$implicit,d=c();return p(d.loadDomains(o.id))}),i(14," Ver Dominios "),n()(),t(15,"td",9)(16,"button",19),E(),t(17,"svg",20),V(18,"path",21),n()()()()}if(r&2){let e=a.$implicit,s=c();l(4),T(" ",e.name.charAt(0)," "),l(2),g(e.name),l(2),g(e.slug),l(2),I("px-2 py-1 rounded-full text-[10px] font-bold uppercase "+s.getStatusClass(e.status)),l(),T(" ",e.status," ")}}function R(r,a){if(r&1&&(t(0,"div",26)(1,"span",27),i(2),n(),t(3,"span",28),i(4),n()()),r&2){let e=a.$implicit;l(2),g(e.domain),l(2),T("Product: ",e.productId)}}function q(r,a){if(r&1){let e=C();t(0,"div",12)(1,"div",22)(2,"h4",23),i(3,"Dominios del Tenant"),n(),t(4,"button",24),u("click",function(){m(e);let o=c();return p(o.selectedTenantDomains.set([]))}),i(5,"Cerrar"),n()(),t(6,"div",25),w(7,R,5,2,"div",26,y),n()()}if(r&2){let e=c();l(7),h(e.selectedTenantDomains())}}function H(r,a){if(r&1&&(t(0,"option",38),i(1),n()),r&2){let e=a.$implicit;D("value",e.id),l(),g(e.name)}}function J(r,a){if(r&1){let e=C();t(0,"div",13)(1,"div",29)(2,"h3",30),i(3,"Registrar Nueva Empresa"),n(),t(4,"div",31)(5,"div")(6,"label",32),i(7,"Nombre de la Empresa"),n(),t(8,"input",33),f("ngModelChange",function(o){m(e);let d=c();return _(d.newTenant.name,o)||(d.newTenant.name=o),p(o)}),n()(),t(9,"div")(10,"label",32),i(11,"Slug (ID \xFAnico)"),n(),t(12,"input",34),f("ngModelChange",function(o){m(e);let d=c();return _(d.newTenant.slug,o)||(d.newTenant.slug=o),p(o)}),n()(),t(13,"div",35)(14,"div")(15,"label",32),i(16,"Primer Dominio"),n(),t(17,"input",36),f("ngModelChange",function(o){m(e);let d=c();return _(d.newTenant.domain,o)||(d.newTenant.domain=o),p(o)}),n()(),t(18,"div")(19,"label",32),i(20,"Producto"),n(),t(21,"select",37),f("ngModelChange",function(o){m(e);let d=c();return _(d.newTenant.productId,o)||(d.newTenant.productId=o),p(o)}),w(22,H,2,2,"option",38,y),n()()()(),t(24,"div",39)(25,"button",40),u("click",function(){m(e);let o=c();return p(o.showModal.set(!1))}),i(26,"Cancelar"),n(),t(27,"button",41),u("click",function(){m(e);let o=c();return p(o.saveTenant())}),i(28,"Crear Empresa"),n()()()()}if(r&2){let e=c();l(8),b("ngModel",e.newTenant.name),l(4),b("ngModel",e.newTenant.slug),l(5),b("ngModel",e.newTenant.domain),l(4),b("ngModel",e.newTenant.productId),l(),h(e.products())}}var L=class r{api=M(P);tenants=x([]);products=x([]);showModal=x(!1);selectedTenantDomains=x([]);newTenant={name:"",slug:"",domain:"",productId:0};ngOnInit(){this.loadTenants(),this.loadProducts()}loadTenants(){this.api.getTenants().subscribe(a=>this.tenants.set(a))}loadProducts(){this.api.getProducts().subscribe(a=>{this.products.set(a),a.length>0&&(this.newTenant.productId=a[0].id)})}loadDomains(a){this.api.getTenantDomains(a).subscribe(e=>this.selectedTenantDomains.set(e))}saveTenant(){this.api.createTenant(this.newTenant).subscribe(()=>{this.loadTenants(),this.showModal.set(!1),this.newTenant={name:"",slug:"",domain:"",productId:this.products()[0]?.id||0}})}getStatusClass(a){switch(a){case"active":return"bg-green-500/10 text-green-400 border border-green-500/20";case"trial":return"bg-amber-500/10 text-amber-400 border border-amber-500/20";case"suspended":return"bg-rose-500/10 text-rose-400 border border-rose-500/20";default:return"bg-slate-500/10 text-slate-400 border border-slate-500/20"}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=k({type:r,selectors:[["app-tenants"]],decls:28,vars:2,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-white"],[1,"text-slate-400"],[1,"px-4","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","transition-all","shadow-lg","shadow-indigo-500/20",3,"click"],[1,"bg-slate-800/50","border","border-slate-700","rounded-2xl","backdrop-blur-sm","overflow-hidden","text-sm"],[1,"w-full","text-left"],[1,"bg-slate-900","border-b","border-slate-700","text-slate-400","uppercase","text-xs"],[1,"p-4"],[1,"p-4","text-right"],[1,"divide-y","divide-slate-700/50","text-slate-300"],[1,"hover:bg-indigo-500/5","transition-colors"],[1,"bg-indigo-500/5","border","border-indigo-500/10","p-6","rounded-2xl","animate-in","slide-in-from-top-4"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","p-4","z-50"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-lg","bg-indigo-500/10","flex","items-center","justify-center","text-indigo-400","font-bold"],[1,"font-medium","text-white"],[1,"p-4","font-mono","text-xs"],[1,"text-indigo-400","hover:text-indigo-300","font-medium","transition-colors",3,"click"],[1,"text-slate-500","hover:text-white","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-white","font-bold","uppercase","text-xs","tracking-widest"],[1,"text-slate-400","hover:text-white",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"bg-slate-900","border","border-slate-700","p-3","rounded-xl","flex","justify-between","items-center"],[1,"text-indigo-400","font-mono","text-sm"],[1,"text-[10px]","text-slate-500","font-bold","uppercase"],[1,"bg-slate-900","border","border-slate-800","w-full","max-w-md","rounded-2xl","shadow-2xl","p-8","transform","animate-in","zoom-in-95"],[1,"text-xl","font-bold","text-white","mb-6"],[1,"space-y-4","text-sm"],[1,"block","mb-2","text-slate-400","font-medium"],["type","text","placeholder","Ej: Fortex Global",1,"bg-slate-800","border","border-slate-700","text-white","rounded-xl","block","w-full","p-3","focus:ring-indigo-500","focus:border-indigo-500","transition-all","outline-none",3,"ngModelChange","ngModel"],["type","text","placeholder","ej: fortex",1,"bg-slate-800","border","border-slate-700","text-white","rounded-xl","block","w-full","p-3","focus:ring-indigo-500","focus:border-indigo-500","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],["type","text","placeholder","fortex.com",1,"bg-slate-800","border","border-slate-700","text-white","rounded-xl","block","w-full","p-3","focus:ring-indigo-500","focus:border-indigo-500","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"bg-slate-800","border","border-slate-700","text-white","rounded-xl","block","w-full","p-3","focus:ring-indigo-500","focus:border-indigo-500","transition-all","outline-none",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-8"],[1,"flex-1","px-4","py-3","bg-slate-800","hover:bg-slate-700","text-white","rounded-xl","transition-all",3,"click"],[1,"flex-1","px-4","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-xl","transition-all","shadow-lg","shadow-indigo-500/20",3,"click"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4,"Empresas (Tenants)"),n(),t(5,"p",3),i(6,"Gestiona las identidades legales y sus dominios de acceso."),n()(),t(7,"button",4),u("click",function(){return s.showModal.set(!0)}),i(8," Nueva Empresa "),n()(),t(9,"div",5)(10,"table",6)(11,"thead",7)(12,"tr")(13,"th",8),i(14,"Empresa"),n(),t(15,"th",8),i(16,"Slug"),n(),t(17,"th",8),i(18,"Estado"),n(),t(19,"th",8),i(20,"Dominios"),n(),t(21,"th",9),i(22,"Acciones"),n()()(),t(23,"tbody",10),w(24,G,19,6,"tr",11,y),n()()(),v(26,q,9,0,"div",12),v(27,J,29,4,"div",13),n()),e&2&&(l(24),h(s.tenants()),l(2),S(s.selectedTenantDomains()&&s.selectedTenantDomains().length>0?26:-1),l(),S(s.showModal()?27:-1))},dependencies:[N,B,O,z,W,A,j,F],styles:["[_nghost-%COMP%]{display:block}"]})};export{L as TenantsComponent};
